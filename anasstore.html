<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>تسجيل المبيعات اليومية</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  input, button, select { padding: 8px; margin: 5px 0; width: 100%; max-width: 300px; }
  table { width: 100%; max-width: 600px; border-collapse: collapse; margin-top: 20px; }
  th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
  th { background-color: #f2f2f2; }
</style>
</head>
<body>
  <h2>تسجيل المبيعات اليومية</h2>

  <label>اسم المنتج:</label>
  <select id="productName">
    <option value="كولون">كولون (6500)</option>
    <option value="جرابات وسط">جرابات وسط (2500)</option>
    <option value="جرابات ثقيل">جرابات ثقيل (3000)</option>
    <option value="خف">خف (2500)</option>
    <option value="بوكسر محير">بوكسر محير (6000)</option>
    <option value="لحمي قصير">لحمي قصير (2500)</option>
    <option value="لحمي طويل">لحمي طويل (3500)</option>
    <option value="كشكش">كشكش (3000)</option>
    <option value="ايميلي">ايميلي (9500)</option>
    <option value="زنود">زنود (6000)</option>
    <option value="شيال">شيال (10000)</option>
    <option value="شيال رياضي">شيال رياضي (11000)</option>
    <option value="طقم ولادي">طقم ولادي (8000)</option>
    <option value="بوكسر رجالي">بوكسر رجالي (8300)</option>
    <option value="بكلة فراشة">بكلة فراشة (5000)</option>
    <option value="مطاط">مطاط (2000)</option>
    <option value="عطر">عطر (5000)</option>
  </select>

  <label>كمية المبيعات:</label>
  <input type="number" id="quantity" min="1" value="1" />

  <label>السعر الكلي (للكمية):</label>
  <input type="number" id="totalPrice" min="1" />

  <button onclick="addSale()">أضف المبيع</button>

  <h3>مبيعات اليوم (<span id="todayDate"></span>)</h3>
  <table id="salesTable">
    <thead>
      <tr>
        <th>اسم المنتج</th>
        <th>الكمية</th>
        <th>السعر الكلي</th>
        <th>سعر الوحدة</th>
        <th>الربح</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <h3>الإجماليات</h3>
  <p>إجمالي المبيع: <span id="totalSales">0</span></p>
  <p>إجمالي الربح: <span id="totalProfit">0</span></p>

<script>
  // أسعار الشراء الأساسية حسب المنتج
  const basePrices = {
    "كولون": 6500,
    "جرابات وسط": 2500,
    "جرابات ثقيل": 3000,
    "خف": 2500,
    "بوكسر محير": 6000,
    "لحمي قصير": 2500,
    "لحمي طويل": 3500,
    "كشكش": 3000,
    "ايميلي": 9500,
    "زنود": 6000,
    "شيال": 10000,
    "شيال رياضي": 11000,
    "طقم ولادي": 8000,
    "بوكسر رجالي": 8300,
    "بكلة فراشة": 5000,
    "مطاط": 2000,
    "عطر": 5000
  };

  const today = new Date().toISOString().slice(0,10);
  document.getElementById("todayDate").textContent = today;

  // جلب المبيعات من التخزين المحلي (LocalStorage)
  function loadSales() {
    let sales = JSON.parse(localStorage.getItem("sales_" + today));
    if (!sales) sales = [];
    return sales;
  }

  // حفظ المبيعات في التخزين المحلي
  function saveSales(sales) {
    localStorage.setItem("sales_" + today, JSON.stringify(sales));
  }

  // تحديث عرض المبيعات في الجدول
  function displaySales() {
    const sales = loadSales();
    const tbody = document.querySelector("#salesTable tbody");
    tbody.innerHTML = "";

    let totalSales = 0;
    let totalProfit = 0;

    sales.forEach(sale => {
      const unitPrice = sale.totalPrice / sale.quantity;
      const profitPerUnit = unitPrice - basePrices[sale.product];
      const profit = profitPerUnit * sale.quantity;

      totalSales += sale.totalPrice;
      totalProfit += profit;

      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${sale.product}</td>
        <td>${sale.quantity}</td>
        <td>${sale.totalPrice.toLocaleString()}</td>
        <td>${unitPrice.toFixed(2)}</td>
        <td>${profit.toLocaleString()}</td>
      `;
      tbody.appendChild(tr);
    });

    document.getElementById("totalSales").textContent = totalSales.toLocaleString();
    document.getElementById("totalProfit").textContent = totalProfit.toLocaleString();
  }

  // إضافة بيع جديد
  function addSale() {
    const product = document.getElementById("productName").value;
    const quantity = parseInt(document.getElementById("quantity").value);
    const totalPrice = parseFloat(document.getElementById("totalPrice").value);

    if (!product || !quantity || !totalPrice) {
      alert("الرجاء تعبئة جميع الحقول بشكل صحيح.");
      return;
    }

    let sales = loadSales();

    sales.push({ product, quantity, totalPrice });

    saveSales(sales);
    displaySales();

    // تنظيف الحقول
    document.getElementById("quantity").value = 1;
    document.getElementById("totalPrice").value = "";
  }

  // تحميل المبيعات عند فتح الصفحة
  window.onload = displaySales;
</script>
</body>
</html>
